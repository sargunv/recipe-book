# https://taskfile.dev

version: "3"

vars:
  GREETING: Hello, World!

tasks:
  build:
    cmds:
      - rm -rf docs/recipes
      - mkdir -p docs/recipes
      - for: sources
        cmd: chef recipe '{{.ITEM}}' --format markdown > '{{joinPath "docs" .ITEM}}.md'
    sources:
      - recipes/**/*.cook
    generates:
      - docs/recipes/**/*.cook.md

  check:
    cmds:
      - for: sources
        cmd: chef recipe check '{{.ITEM}}'
    sources:
      - recipes/**/*.cook
